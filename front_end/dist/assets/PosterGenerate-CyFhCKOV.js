import{co as e,j as t,bY as l,r as a,c as n,w as s,a5 as o,a as i,p as d,s as c,v as r,A as u,B as p,bZ as v,q as m,Q as b,X as f,y as h,W as g,Y as w,ab as y,O as E,cp as A,cd as k,a9 as j,u as U,cu as _,c8 as x,cq as B,c3 as C,c4 as I,c0 as V,cv as D,bT as O,bS as $,bO as L,ac as R}from"./index-Bm01IdcZ.js";const z=[{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%202.webp",type:"产品类",title:"产品 2"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%2014.webp",type:"产品类",title:"产品 14"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%2018.webp",type:"产品类",title:"产品 18"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E5%93%81%E7%89%8C%201.webp",type:"品牌类",title:"品牌 1"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%2019.webp",type:"产品类",title:"产品 19"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%2015.webp",type:"产品类",title:"产品 15"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%203.webp",type:"产品类",title:"产品 3"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%208.webp",type:"产品类",title:"产品 8"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E8%8A%82%E6%B0%94%201.webp",type:"节气类",title:"节气 1"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E5%93%81%E7%89%8C%207.webp",type:"品牌类",title:"品牌 7"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%204.webp",type:"产品类",title:"产品 4"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%2012.webp",type:"产品类",title:"产品 12"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%2013.webp",type:"产品类",title:"产品 13"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%205.webp",type:"产品类",title:"产品 5"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E5%93%81%E7%89%8C%206.webp",type:"品牌类",title:"品牌 6"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%209.webp",type:"产品类",title:"产品 9"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E5%93%81%E7%89%8C%205.webp",type:"品牌类",title:"品牌 5"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E8%8A%82%E6%B0%94%203.webp",type:"节气类",title:"节气 3"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E5%93%81%E7%89%8C%209.webp",type:"品牌类",title:"品牌 9"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%2010.webp",type:"产品类",title:"产品 10"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%206.webp",type:"产品类",title:"产品 6"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%207.webp",type:"产品类",title:"产品 7"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%2011.webp",type:"产品类",title:"产品 11"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E5%93%81%E7%89%8C%208.webp",type:"品牌类",title:"品牌 8"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E8%8A%82%E6%B0%94%202.webp",type:"节气类",title:"节气 2"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E5%93%81%E7%89%8C%204.webp",type:"品牌类",title:"品牌 4"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%2016.webp",type:"产品类",title:"产品 16"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E5%93%81%E7%89%8C%203.webp",type:"品牌类",title:"品牌 3"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E8%8A%82%E6%B0%94%204.webp",type:"节气类",title:"节气 4"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E5%93%81%E7%89%8C%202.webp",type:"品牌类",title:"品牌 2"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%201.webp",type:"产品类",title:"产品 1"},{url:"https://ennova-bigdata-test.obsv3.cn-lflt-1.enncloud.cn/video/model/wj/%E4%BA%A7%E5%93%81%2017.webp",type:"产品类",title:"产品 17"},{title:"专属时刻，定格美好",url:"",type:"艺术字",prompt:"黑底白字，主体为现代艺术手写创意字体 “专属时刻，定格美好”；字体笔画融合柔美曲线与锐利直线，曲线飘逸延伸，直线挺拔利落；字形呈横向舒展且略带动态倾斜的布局，字间笔画相互呼应、富有视觉流动感；笔画粗细对比细腻（主笔稳重、辅笔纤细轻盈），线条边缘光滑自然；下方搭配纤细无衬线字体 “Have fun together.”；整体营造 浪漫细腻、心动时的轻盈艺术 氛围，突出字体的曲线韵律、动态布局与中英文风格融合的效果。"},{title:"山海",url:"",type:"艺术字",prompt:"狂野豪迈的连体书法字“山海”，笔画流畅飘逸，国潮风笔触，极具视觉冲击力，笔画拉长变形出流畅的飞白，黑底白字。"},{title:"焕新启程 礼敬匠心",url:"",type:"艺术字",prompt:"标题字体设计,文字“焕新启程 礼敬匠心”极具个性和街头感的涂鸦字体，充满力度与不规则感流动的、跳跃的效果，字体大小、排版错落，白色字体，纯黑色背景。LOGO矢量"},{title:"超级开学季 625学院",url:"",type:"艺术字",prompt:"标题字体设计，大文字“超级开学季 625学院”，小字英文“ZHOUZHOU”，街头涂鸦风格，笔画夸张变形，粗细对比强烈，不规则切割效果，字体流动跳跃，白色带多彩内色，蓝渐变线条装饰，暗蓝色双层厚度，多层描边，开学季元素抽象点缀，纯黑背景"},{title:"元气满满",url:"",type:"艺术字",prompt:"字体，logo设计，漫画字体，字体内容“元气满满”，漫画纹理，胖嘟嘟可爱感觉，黑色背景。卡通感十足"},{title:"夏日心跳，即刻启程！",url:"",type:"艺术字",prompt:"字体，logo设计，中文“夏日心跳，即刻启程！”，白色字体，蓝色加粗边线，轻松夏日风格，创意可爱体矢量插画，露营帐篷等小元素穿插字体中，创意字体设计Logo 纯黑背景"},{title:"森林探险",url:"",type:"艺术字",prompt:"字体设计 “森林探险”，纯黑色背景，自然森林木纹字体，苔藓包裹文字，木质纹理，被藤蔓缠绕，创意写实，大师级构图"},{title:"夏日海边",url:"",type:"艺术字",prompt:"字体设计，大文字“夏日海边”，英文“Summer”极具个性和街头感的涂鸦字体，充满力度与不规则感流动的、跳跃的效果，多彩字体可以带点渐变,蓝色线条装饰，纯黑色背景，画面干净"}],P=e=>(C("data-v-2dac8f1a"),e=e(),I(),e),S={class:"poster-generate modal-mode"},H={class:"side-panel"},K=P((()=>r("div",{class:"panel-header"},[r("h3",null,"模版库"),r("span",{class:"subtitle"},"点击图片引用风格")],-1))),T={class:"tab-content-scroll","infinite-scroll-distance":50,"infinite-scroll-immediate":!0},q={class:"example-grid"},G=["onClick"],Z={class:"card-image"},F=["src","alt"],J=P((()=>r("div",{class:"card-overlay"},[r("span",{class:"use-btn"},"引用")],-1))),N={class:"card-title"},W={class:"scroll-status"},Y={key:0,class:"no-more"},M={key:1,class:"loading-more"},Q={class:"chat-panel"},X={key:0,class:"bubble loading-state"},ee={class:"loading-icon"},te={class:"loading-content"},le={class:"loading-text"},ae=P((()=>r("div",{class:"loading-bar"},null,-1))),ne={key:1,class:"bubble text-bubble"},se={key:2,class:"bubble image-bubble"},oe={class:"img-wrapper"},ie=["src"],de={class:"img-actions-grid"},ce={key:0,class:"reference-strip"},re={class:"strip-head"},ue={class:"count"},pe=P((()=>r("span",{class:"strip-note"},"引用来自模板，底图来自上传",-1))),ve={key:0,class:"reference-list"},me=["src"],be={class:"chip-info"},fe={class:"chip-title"},he=["onClick"],ge={key:1,class:"reference-empty"},we={class:"chat-input"},ye={class:"mode-toolbar inside"},Ee=P((()=>r("div",{class:"mode-title"},"模式",-1))),Ae={class:"mode-row"},ke={class:"summary-pill outlined"},je={class:"pill-ratio"},Ue=P((()=>r("span",{class:"pill-divider"},null,-1))),_e={class:"pill-size"},xe={class:"format-panel"},Be={class:"format-section"},Ce=P((()=>r("p",null,"选择比例",-1))),Ie={class:"ratio-options"},Ve={class:"format-section size-inputs"},De=P((()=>r("p",null,"尺寸 (px)",-1))),Oe={class:"size-row"},$e=P((()=>r("span",null,"×",-1))),Le={class:"input-area"},Re={class:"chat-actions"},ze=R(t({__name:"PosterGenerate",setup(t){var C;const I=(k.API_URL&&k.API_URL.trim().length?k.API_URL:"undefined"!=typeof window?window.location.origin:"").replace(/\/$/,""),R=["产品类","品牌类","节气类","艺术字"],P=l([{id:crypto.randomUUID(),role:"ai",type:"text",content:"你好，我是海报生成助手。告诉我你的想法或上传参考图，我会给出建议。"}]),ze=a(""),Pe=[{label:"文生图",value:"text"},{label:"参考图生成",value:"reference"},{label:"艺术字生成",value:"art"}],Se=a("text"),He=["21:9","16:9","3:2","4:3","1:1","3:4","2:3","9:16"],Ke={"1:1":{width:2048,height:2048},"4:3":{width:2304,height:1728},"3:2":{width:2496,height:1664},"16:9":{width:2560,height:1440},"21:9":{width:3024,height:1296}},Te=l({ratio:"16:9",width:1024,height:768}),qe=a(!1),Ge=a(!1),Ze=a(null),Fe=a(null),Je=a([]),Ne=a(null),We=l((()=>{const e={"产品类":[],"品牌类":[],"节气类":[]};return z.forEach(((t,l)=>{e[t.type]&&e[t.type].push({id:`${t.type}-${l}`,title:t.title,cover:t.url})})),R.map((t=>({id:t,name:t,examples:e[t]||[]})))})()),Ye=a((null==(C=We[0])?void 0:C.id)||"产品类"),Me=l({});We.forEach((e=>Me[e.id]=10));const Qe=n((()=>We.find((e=>e.id===Ye.value)))),Xe=n((()=>{const e=Qe.value;if(!e)return[];const t=Me[e.id]||10;return e.examples.slice(0,t)})),et=n((()=>Je.value.length<2)),tt=n((()=>{const e=ze.value.trim();return"reference"===Se.value?!(!e&&!Je.value.length):!!e}));s(Se,(e=>{"reference"!==e&&(Je.value=[])})),s(Ye,(e=>{Me[e]||(Me[e]=10)}));const lt=n((()=>`${Te.width}×${Te.height}px`)),at=V(),nt=o(),st=e=>(P.push(e),L((()=>{var e;null==(e=Fe.value)||e.scrollTo({top:Fe.value.scrollHeight,behavior:"smooth"})})),e.id),ot=(e,t)=>{const l=P.find((t=>t.id===e));l&&(l.content=t)},it=()=>!!et.value||(A.warning("引用区最多只能放 2 张图片"),!1),dt=e=>{Je.value.unshift({...e,id:crypto.randomUUID()}),Je.value=Je.value.slice(0,2)},ct=()=>{var e;it()&&(null==(e=Ze.value)||e.click())},rt=async e=>{const t=e.target,l=null==t?void 0:t.files;if(l&&l[0])if(it()){Ge.value=!0;try{const{preview:e,remote:t,fileKey:a}=await vt(l[0]),n=Je.value.some((e=>"template"===e.source)),s="reference"===Se.value&&n?"base":"reference";dt({src:e,remote:t,title:l[0].name,kind:s,fileKey:a,source:"upload"})}catch(a){A.error(gt(a))}finally{Ge.value=!1,t&&(t.value="")}}else t.value=""},ut=()=>{const e=Qe.value;if(!e)return;const t=e.examples.length,l=Me[e.id];l<t&&(Me[e.id]=Math.min(l+10,t))},pt=async()=>{var t,l;const a=ze.value.trim();if(!a&&!Je.value.length)return void A.warning("请输入内容或选择参考图");if(qe.value)return;qe.value=!0;const n=Je.value.map((e=>({...e})));try{await wt(n),a&&st({id:crypto.randomUUID(),role:"user",type:"text",content:a}),n.forEach((e=>{st({id:crypto.randomUUID(),role:"user",type:"image",content:e.src})}));const s={prompt:a||"根据当前参考图片生成海报",references:n.filter((e=>"reference"===e.kind)).map((e=>e.remote)),base_images:n.filter((e=>"base"===e.kind)).map((e=>e.ossUrl||e.remote))},o=st({id:crypto.randomUUID(),role:"ai",type:"loading",content:"正在提交任务..."}),i=await(t=>e("api/poster/tasks",t,"post",{},{timeout:18e4}))(s);if(!(0===i.code||200===i.code||1===i.stat)){ot(o,i.message||"任务创建失败");const e=P.find((e=>e.id===o));throw e&&(e.type="text"),new Error(i.message||"任务创建失败")}const d=(null==(t=i.data)?void 0:t.image_urls)||i.image_urls;if(null==d?void 0:d.length){ot(o,"生成完成，已返回预览。");const e=P.find((e=>e.id===o));return e&&(e.type="text"),d.forEach((e=>st({id:crypto.randomUUID(),role:"ai",type:"image",content:e}))),qe.value=!1,void(Je.value=[])}const c=null==(l=i.data)?void 0:l.task_id;if(!c){ot(o,"系统异常：任务ID缺失");const e=P.find((e=>e.id===o));throw e&&(e.type="text"),new Error("任务ID缺失")}ot(o,"正在排队中..."),ft(c,o)}catch(s){qe.value=!1,A.error(gt(s))}finally{ze.value=""}},vt=async t=>{const l=new FormData;l.append("file",t);const a=await e("api/files/upload",l,"post");if(!a||"success"!==a.status||!a.file_path)throw new Error((null==a?void 0:a.message)||"上传失败");return{preview:await ht(t),remote:`${I}/api/files/${a.file_path}`,fileKey:a.file_path}},mt={in_queue:"前方排队中...",generating:"AI正在绘制...",processing:"努力生成中...",running:"正在处理细节...",pending:"等待调度..."},bt=()=>{Ne.value&&(window.clearTimeout(Ne.value),Ne.value=null)},ft=(t,l)=>{bt();const a=async()=>{var n,s;try{const o=await(t=>e(`api/poster/tasks/${t}`,{},"get"))(t);if(0!==o.code)throw new Error(o.message||"查询失败");const i=(null==(n=o.data)?void 0:n.status)||"unknown";if(["done","success","finished"].includes(i)){ot(l,"生成完成！");const e=P.find((e=>e.id===l));e&&(e.type="text");const t=(null==(s=o.data)?void 0:s.image_urls)||[];return t.length?t.forEach((e=>{st({id:crypto.randomUUID(),role:"ai",type:"image",content:e})})):st({id:crypto.randomUUID(),role:"ai",type:"text",content:"任务完成，但暂未获取到图片。"}),qe.value=!1,Je.value=[],void bt()}if(["failed","error","timeout"].includes(i)){ot(l,"生成失败，请稍后重试。");const e=P.find((e=>e.id===l));return e&&(e.type="text"),qe.value=!1,void bt()}ot(l,mt[i]||`状态: ${i}`),Ne.value=window.setTimeout(a,3e3)}catch(o){ot(l,`查询失败：${gt(o)}`);const e=P.find((e=>e.id===l));e&&(e.type="text"),qe.value=!1,bt()}};a()},ht=e=>new Promise(((t,l)=>{const a=new FileReader;a.onload=()=>t(a.result),a.onerror=l,a.readAsDataURL(e)})),gt=e=>e instanceof Error?e.message:String(e),wt=async t=>{const l=t.filter((e=>"base"===e.kind&&!e.ossUrl&&e.fileKey));if(l.length)for(const a of l){const t=await e("api/files/upload-oss",{file_path:a.fileKey,remote_path:"poster/base"},"post");if(!t||"success"!==t.status||!t.oss_url)throw new Error((null==t?void 0:t.message)||"OSS上传失败");a.ossUrl=t.oss_url;const l=Je.value.find((e=>e.id===a.id));l&&(l.ossUrl=t.oss_url)}};return i((()=>{bt()})),(e,t)=>{const l=v("el-icon"),a=v("el-tab-pane"),n=v("el-tabs"),s=v("el-button"),o=v("el-option"),i=v("el-select"),k=v("el-input-number"),C=v("el-popover"),I=v("el-input"),V=D("infinite-scroll");return c(),d("div",S,[r("aside",H,[K,u(n,{modelValue:Ye.value,"onUpdate:modelValue":t[0]||(t[0]=e=>Ye.value=e),class:"poster-tabs",stretch:""},{default:p((()=>[(c(!0),d(b,null,f(We,(e=>(c(),E(a,{key:e.id,name:e.id,label:e.name},{default:p((()=>{var e;return[j((c(),d("div",T,[r("div",q,[(c(!0),d(b,null,f(Xe.value,(e=>(c(),d("div",{key:e.id,class:h(["example-card",{disabled:!et.value,active:Je.value.some((t=>t.remote===e.cover))}]),onClick:t=>(e=>{if(!it())return;if("reference"!==Se.value)return void A.warning("此模式下不需要参考图，请切换到参考图生成");Je.value.some((e=>"template"===e.source))?A.warning("模板参考图只能选择一张，请上传底图"):dt({src:e.cover,remote:e.cover,title:e.title,kind:"reference",source:"template"})})(e)},[r("div",Z,[r("img",{src:e.cover,alt:e.title,loading:"lazy"},null,8,F),J]),r("p",N,g(e.title),1)],10,G)))),128))]),r("div",W,[Xe.value.length>=((null==(e=Qe.value)?void 0:e.examples.length)||0)?(c(),d("span",Y," - 到底了 - ")):(c(),d("span",M,[u(l,{class:"is-loading"},{default:p((()=>[u(U(_))])),_:1}),w(" 加载中... ")]))])])),[[V,ut]])]})),_:2},1032,["name","label"])))),128))])),_:1},8,["modelValue"])]),r("section",Q,[r("div",{ref_key:"messageContainer",ref:Fe,class:"messages"},[(c(!0),d(b,null,f(P,(e=>(c(),d("div",{key:e.id,class:h(["message",e.role])},["loading"===e.type?(c(),d("div",X,[r("div",ee,[u(l,{class:"is-loading"},{default:p((()=>[u(U(_))])),_:1})]),r("div",te,[r("span",le,g(e.content),1),ae])])):"text"===e.type?(c(),d("div",ne,g(e.content),1)):(c(),d("div",se,[r("div",oe,[r("img",{src:e.content,alt:"chat image"},null,8,ie)]),r("div",de,[u(s,{class:"action-btn",icon:"Download",size:"small",plain:"",onClick:t=>(async e=>{try{const t=await fetch(e),l=await t.blob(),a=document.createElement("a");a.href=URL.createObjectURL(l),a.download=`poster-${Date.now()}.png`,a.click(),URL.revokeObjectURL(a.href)}catch(t){A.error(gt(t))}})(e.content)},{default:p((()=>[w(" 下载 ")])),_:2},1032,["onClick"]),u(s,{class:"action-btn",type:"primary",icon:"Plus",size:"small",onClick:t=>(async e=>{"Home"!==at.currentRoute.value.name&&await at.push({name:"Home"});const t=new Image;t.crossOrigin="anonymous",t.src=e,t.onload=()=>{const l=JSON.parse(JSON.stringify(O));l.url=e,l.imgUrl=e,l.width=t.width,l.height=t.height,nt.addWidget(l,{toTop:!0}),$.emit("closePosterGenerate"),A.success("已添加到画布")},t.onerror=()=>A.error("加载图片失败")})(e.content)},{default:p((()=>[w(" 添加到画布 ")])),_:2},1032,["onClick"])])]))],2)))),128))],512),"reference"===Se.value?(c(),d("div",ce,[r("div",re,[r("div",null,[w("引用区 "),r("span",ue,g(Je.value.length)+"/"+g(2),1)]),pe]),Je.value.length?(c(),d("div",ve,[(c(!0),d(b,null,f(Je.value,(e=>(c(),d("div",{class:"reference-chip",key:e.id},[r("img",{src:e.src,alt:"reference"},null,8,me),r("div",be,[r("span",{class:h(["chip-label",e.kind])},g("reference"===e.kind?"引用":"底图"),3),r("span",fe,g(e.title||"未命名图片"),1)]),r("div",{class:"chip-remove",onClick:y((t=>{return l=e.id,void(Je.value=Je.value.filter((e=>e.id!==l)));var l}),["stop"])},[u(l,null,{default:p((()=>[u(U(x))])),_:1})],8,he)])))),128))])):(c(),d("p",ge,"从左侧模板或上传底图添加图片（最多两张）。"))])):m("",!0),r("div",we,[r("div",ye,[Ee,r("div",Ae,[u(i,{modelValue:Se.value,"onUpdate:modelValue":t[1]||(t[1]=e=>Se.value=e),size:"small",class:"mode-select"},{default:p((()=>[(c(),d(b,null,f(Pe,(e=>u(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"]),"text"===Se.value?(c(),E(C,{key:0,placement:"bottom-start",trigger:"click",width:"360"},{reference:p((()=>[r("button",ke,[r("span",je,g(Te.ratio),1),Ue,r("span",_e,g(lt.value),1)])])),default:p((()=>[r("div",xe,[r("div",Be,[Ce,r("div",Ie,[(c(),d(b,null,f(He,(e=>u(s,{key:e,size:"small",type:e===Te.ratio?"primary":"default",onClick:t=>(e=>{Te.ratio=e,Ke[e]&&(Te.width=Ke[e].width,Te.height=Ke[e].height)})(e)},{default:p((()=>[w(g(e),1)])),_:2},1032,["type","onClick"]))),64))])]),r("div",Ve,[De,r("div",Oe,[u(k,{modelValue:Te.width,"onUpdate:modelValue":t[2]||(t[2]=e=>Te.width=e),min:256,max:4096},null,8,["modelValue"]),$e,u(k,{modelValue:Te.height,"onUpdate:modelValue":t[3]||(t[3]=e=>Te.height=e),min:256,max:4096},null,8,["modelValue"])])])])])),_:1})):"reference"===Se.value?(c(),E(s,{key:1,class:"upload-btn-outlined",loading:Ge.value,disabled:Ge.value||!et.value,onClick:ct},{default:p((()=>[u(l,null,{default:p((()=>[u(U(B))])),_:1}),w(" 上传图片 ")])),_:1},8,["loading","disabled"])):m("",!0)])]),r("div",Le,[u(I,{modelValue:ze.value,"onUpdate:modelValue":t[4]||(t[4]=e=>ze.value=e),type:"textarea",rows:3,class:"fixed-textarea",resize:"none",placeholder:"art"===Se.value?"描述你想生成的艺术字效果":"描述你想要的海报或提出问题"},null,8,["modelValue","placeholder"])]),r("div",Re,[r("input",{ref_key:"imageInput",ref:Ze,class:"hidden-input",type:"file",accept:"image/*",onChange:rt},null,544),u(s,{type:"primary",onClick:pt,loading:qe.value,disabled:qe.value||!tt.value},{default:p((()=>[w(" 发送 ")])),_:1},8,["loading","disabled"])])])])])}}}),[["__scopeId","data-v-2dac8f1a"]]);export{ze as default};
